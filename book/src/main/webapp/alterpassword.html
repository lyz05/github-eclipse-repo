<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>修改密码 - 图书借阅管理系统</title>
		<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
		<script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
		<!-- bootstrap -->
		<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.4.1/css/bootstrap.min.css">	
		<script src="https://cdn.staticfile.org/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
		<!-- jQuery i18n -->
		<script src="static/js/jquery.json.min.js"></script>
		<script src="static/js/jquery.i18n.properties.js"></script>
		<script src="static/js/i18n.js"></script>
		<!-- 自定义js -->
		<script src="static/js/ajaxrequest.js"></script>
		<script src="static/js/jquery-form.js"></script>
	</head>

<body>
		<div class="container">
		<div class="row text-center" >
			<div class="col-sm-4 col-sm-offset-4">
				<h1 data-locale="alterpwd">修改密码</h1>
				<div class="alert alert-info fade in" style="display: none;"
					role="alert" id="alert">alert message</div>
				<form id="form1" class="form-horizontal"
					onkeydown="if(event.keyCode==13)alterpwd();">
					<div class="form-group input-group">
						<span class="input-group-addon">
			            	<span class="glyphicon glyphicon-user"></span>
			            </span>
						<input data-locale-placeholder="readerno" id="username" name="username" placeholder="读者号"
							class="form-control" readonly>
					</div>
					<div class="form-group input-group">
						<span class="input-group-addon">
			            	<span class="glyphicon glyphicon-lock"></span>
			            </span>
						<input data-locale-placeholder="oldpwd" name="pwd" type="password" placeholder="旧密码"
							class="form-control">
					</div>
					<div class="form-group input-group">
						<span class="input-group-addon">
			            	<span class="glyphicon glyphicon-lock"></span>
			            </span>
						<input data-locale-placeholder="newpwd" name="newpwd" type="password" placeholder="新密码"
							class="form-control">
					</div>
					<div class="form-group input-group">
						<span class="input-group-addon">
			            	<span class="glyphicon glyphicon-lock"></span>
			            </span>
						<input data-locale-placeholder="newpwd2" name="newpwd2" type="password" placeholder="再次确认新密码"
							class="form-control">
					</div>
					<div class="form-group">
						<input data-locale-btn="alterpwd" type="button" value="修改密码" class="btn btn-primary btn-block"
							onclick="alterpwd()" />
						<input data-locale-btn="return" type="button" value="返回"
							class="btn btn-default btn-block"
							onclick="history.back();" />
					</div>
				</form>
			</div>
		</div>
	</div>
	<script>
		function documentready(){
			$('title').html($.i18n.prop('alterpwd')+" - "+$.i18n.prop('systemname'));
		}
		function tableautoresize() {}
		function alterpwd() {
			ajaxRequest("post", "User/psdalter", $('#form1').serialize(), null,null);
		}
		//获取查询字符串
		function GetQueryString(name) {
			var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
			var r = window.location.search.substr(1).match(reg);
			if (r != null)
				return unescape(r[2]);
			return null;
		}
		$('#username').val(GetQueryString('username'));
	</script>
</body>
</html>